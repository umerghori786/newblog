(()=>{var o=function o(n){if(!window.hasOwnProperty("spyholeConfig")||!window.spyholeConfig.hasOwnProperty("storeUrl"))throw new Error("Missing spyhole configuration");n.path=window.location.pathname,fetch(window.spyholeConfig.storeUrl,{method:"POST",body:JSON.stringify(n),headers:{Accept:"application/json","Content-Type":"application/json","X-CSRF-Token":window.spyholeConfig.xsrf}}).then((function(o){return o.json()})).then((function(o){o.success&&(window.spyholeDom.currentPage.recording=o.recording)})).catch((function(){setTimeout((function(){return o(n)}),500)}))};!function(){if(!(window.hasOwnProperty("spyholeConfig")&&window.spyholeConfig.hasOwnProperty("storeUrl")&&window.spyholeConfig.hasOwnProperty("samplingRate")&&window.spyholeConfig.hasOwnProperty("xsrf")&&window.hasOwnProperty("spyholeDom")&&window.spyholeDom.hasOwnProperty("domSent")))throw new Error("Missing spyhole configuration");rrweb.record({emit:function(n){if(window.hasOwnProperty("spyholeEvents")||(window.spyholeEvents=[]),window.spyholeEvents.push(n),window.spyholeEvents.length>=window.spyholeConfig.samplingRate){var e={frames:window.spyholeEvents,path:window.location.pathname};window.spyholeEvents=[],window.spyholeDom.domSent||(e.scene=document.documentElement.innerHTML,window.spyholeDom.domSent=!0),null!==window.spyholeDom.currentPage.recording&&(e.recording=window.spyholeDom.currentPage.recording),o(e)}}}),window.addEventListener("beforeunload",(function(){o({frames:window.spyholeEvents})}))}()})();